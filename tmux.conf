# tmux.conf - Tema minimalista transparente
# Sin colores, solo texto y bordes sutiles

# Terminal - modo 256 colores para compatibilidad
set -g default-terminal "xterm-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Configuración básica
set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on
set -g history-limit 10000
set -sg escape-time 10
set -g focus-events on
set -g mouse on

# ========== PREMISA: NO COLORES, SOLO TEXTO ==========

# Bordes de paneles - gris muy tenue (casi invisible)
set -g pane-border-style "fg=colour238"
set -g pane-active-border-style "fg=colour245"

# Barra de estado - totalmente minimalista
set -g status on
set -g status-interval 1
set -g status-style "bg=default,fg=colour250"  # Fondo transparente

# Lado izquierdo: solo sesión actual
set -g status-left-length 30
set -g status-left "#[fg=colour245] #[bg=default]#S #[fg=colour238]│"

# Lado derecho: solo hora
set -g status-right-length 20
set -g status-right "#[fg=colour238]│ #[fg=colour245]%H:%M"

# Ventanas - sin resaltado, solo texto
set -g window-status-current-style "bg=default,fg=white,bold"
set -g window-status-current-format "#I:#W"

set -g window-status-style "bg=default,fg=colour245"
set -g window-status-format "#I:#W"
set -g window-status-separator "  "

# Barra de modo (cuando copias, etc.) - discreta
set -g mode-style "bg=colour238,fg=colour250"

# ========== NAVEGACIÓN VIM ==========

# Navegación entre ventanas
bind-key -r h select-window -t :-
bind-key -r l select-window -t :+

# Navegación entre paneles (con prefijo Ctrl+B)
bind-key -r j select-pane -D
bind-key -r k select-pane -U
bind-key -r h select-pane -L
bind-key -r l select-pane -R

# Redimensionar paneles
bind-key -r H resize-pane -L 5
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 5

# ========== MODO COPIA VIM ==========

bind-key -T prefix [ copy-mode
set-window-option -g mode-keys vi

# Atajos esenciales modo copia
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind-key -T copy-mode-vi Escape send-keys -X cancel

# Navegación básica
bind-key -T copy-mode-vi h send-keys -X cursor-left
bind-key -T copy-mode-vi j send-keys -X cursor-down
bind-key -T copy-mode-vi k send-keys -X cursor-up
bind-key -T copy-mode-vi l send-keys -X cursor-right

# Búsqueda
bind-key -T copy-mode-vi / command-prompt -p "search:" "send -X search-forward \"%%%\""
bind-key -T copy-mode-vi ? command-prompt -p "search:" "send -X search-backward \"%%%\""
bind-key -T copy-mode-vi n send-keys -X search-again
bind-key -T copy-mode-vi N send-keys -X search-reverse

# ========== COMANDOS ESENCIALES ==========

# Dividir paneles
bind-key | split-window -h -c "#{pane_current_path}"
bind-key - split-window -v -c "#{pane_current_path}"

# Nueva ventana
bind-key c new-window -c "#{pane_current_path}"

# Renombrar ventana
bind-key , command-prompt -I "#W" "rename-window '%%'"

# Recargar configuración
bind-key r source-file ~/.tmux.conf \; display-message "✓"

# ========== OPCIONAL: MODE TRANSPARENTE EXTREMO ==========

# Descomenta estas líneas para hacer la barra de estado INVISIBLE
# excepto cuando hay notificaciones:

# set -g status off
# set -g visual-activity on
# set -g visual-bell on
# set -g visual-silence on
# set -g monitor-activity on
# 
# # Mostrar barra solo cuando hay actividad
# set -g status-interval 30
# set-hook -g alert-activity 'set status on'
# set-hook -g client-detached 'set status off'
# set-hook -g client-attached 'set status off'

# ========== TIPS RÁPIDOS ==========
#
# PREFIJO: Ctrl+B (default)
#
# MOVERSE:
#   Ctrl+B + h/j/k/l    ←/↓/↑/→ entre paneles
#   Ctrl+B + h/l        ←/→ entre ventanas
#   Ctrl+B + [          Modo copia (luego v, y)
#
# CREAR:
#   Ctrl+B + |          Dividir vertical
#   Ctrl+B + -          Dividir horizontal
#   Ctrl+B + c          Nueva ventana
#
# UTILES:
#   Ctrl+B + ,          Renombrar ventana
#   Ctrl+B + r          Recargar config
#   Ctrl+B + d          Desconectar
#   Ctrl+B + ?          Ayuda
